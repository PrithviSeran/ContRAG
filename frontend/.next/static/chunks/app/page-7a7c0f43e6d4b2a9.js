(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4538:function(e,s,t){Promise.resolve().then(t.bind(t,6458))},6458:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return L}});var a=t(7437),r=t(2265),l=t(5925),n=t(5020),c=t(4776),i=t(7227),o=t(1001),d=t(4829);function x(e){let{onUploadComplete:s,onProcessingStart:t,apiKey:x}=e,[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),j=(0,r.useCallback)((e,s)=>{s.length>0&&s.forEach(e=>{l.Am.error('File "'.concat(e.file.name,'" rejected: ').concat(e.errors[0].message))});let t=e.filter(e=>{let s=m.some(s=>s.file.name===e.name&&s.file.size===e.size);return!s||(l.Am.error('File "'.concat(e.name,'" is already selected')),!1)}).map(e=>({file:e,preview:e.name}));u(e=>[...e,...t])},[m]),{getRootProps:y,getInputProps:f,isDragActive:N}=(0,n.uI)({onDrop:j,accept:{"text/html":[".html",".htm"],"text/plain":[".txt"]},multiple:!0,maxSize:10485760}),v=e=>{u(s=>s.filter((s,t)=>t!==e))},w=async()=>{if(0===m.length){l.Am.error("Please select files to upload");return}if(!x){l.Am.error("Please set your Gemini API key first");return}g(!0);try{try{await d.Z.delete("".concat("http://localhost:8000","/reset"),{headers:{"X-API-Key":x}})}catch(e){console.warn("Could not clear existing files:",e)}let e=new FormData;m.forEach(s=>{let{file:t}=s;e.append("files",t)}),await d.Z.post("".concat("http://localhost:8000","/upload"),e,{headers:{"Content-Type":"multipart/form-data","X-API-Key":x}}),l.Am.success("Successfully uploaded ".concat(m.length," files")),s(),g(!1),b(!0),t(),await d.Z.post("".concat("http://localhost:8000","/process"),{},{headers:{"X-API-Key":x}}),l.Am.success("Processing started!"),u([])}catch(s){var e,a;l.Am.error((null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.detail)||"Upload and processing failed"),console.error("Upload and processing error:",s)}finally{g(!1),b(!1)}},k=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},S=h||p;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h2",{className:"mt-2 text-xl font-semibold text-gray-900",children:"Upload Contract Files"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Upload HTML, HTM, or TXT contract files for processing"})]}),(0,a.jsxs)("div",{...y(),className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ".concat(N?"border-blue-400 bg-blue-50":S?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-gray-400"),children:[(0,a.jsx)("input",{...f(),disabled:S}),(0,a.jsx)(c.Z,{className:"mx-auto h-8 w-8 ".concat(S?"text-gray-300":"text-gray-400")}),N?(0,a.jsx)("p",{className:"mt-2 text-blue-600",children:"Drop the files here..."}):(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"".concat(S?"text-gray-400":"text-gray-600"),children:S?"Processing in progress...":(0,a.jsxs)(a.Fragment,{children:["Drag & drop contract files here, or ",(0,a.jsx)("span",{className:"text-blue-600 font-medium",children:"click to browse"})]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supports: HTML, HTM, TXT files (max 10MB each)"})]})]}),m.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900",children:["Selected Files (",m.length,")"]}),(0,a.jsx)("button",{onClick:()=>{u([])},disabled:S,className:"text-sm text-red-600 hover:text-red-800 disabled:text-gray-400",children:"Clear All"})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto space-y-2",children:m.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:k(e.file.size)})]}),(0,a.jsx)("button",{onClick:()=>v(s),disabled:S,className:"ml-2 p-1 text-red-500 hover:text-red-700 disabled:text-gray-300",children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})]},s))}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{onClick:w,disabled:S||0===m.length,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 disabled:from-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2",children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:h?"Uploading...":"Starting Processing..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Upload & Process Contracts"})]})})})]})]})}var m=t(9186),u=t(887);function h(e){let{status:s}=e,t=()=>{switch(s.status){case"processing":return"text-blue-600";case"completed":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-600"}};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:t(),children:(()=>{switch(s.status){case"processing":default:return(0,a.jsx)(o.Z,{className:"h-6 w-6"});case"completed":return(0,a.jsx)(m.Z,{className:"h-6 w-6"});case"error":return(0,a.jsx)(u.Z,{className:"h-6 w-6"})}})()}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Processing Status"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[s.progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 ".concat("error"===s.status?"bg-red-500":"completed"===s.status?"bg-green-500":"bg-blue-500"),style:{width:"".concat(s.progress,"%")}})})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Files Processed:"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.processed_files," / ",s.total_files]})]}),s.current_file&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Current File:"}),(0,a.jsx)("div",{className:"mt-1 p-3 bg-blue-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 truncate",children:s.current_file})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,a.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm font-medium ".concat(t()),children:s.message})})]}),s.job_id&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Job ID: ",s.job_id]})]}),"processing"===s.status&&(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-gray-600",children:"Processing contracts..."})]})]})}var g=t(7154),p=t(1809),b=t(5856);function j(e){let{apiKey:s}=e,[t,n]=(0,r.useState)([]),[c,i]=(0,r.useState)(""),[o,x]=(0,r.useState)(!1),m=(0,r.useRef)(null),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(u.current&&m.current){let e=u.current,s=e.scrollTop+e.clientHeight>=e.scrollHeight-100;(s||t.length<=1)&&m.current.scrollIntoView({behavior:"smooth",block:"nearest"})}},[t]);let h=async()=>{if(!c.trim()||o)return;if(!s){l.Am.error("Please set your Gemini API key first");return}let e={role:"user",content:c.trim(),timestamp:new Date};n(s=>[...s,e]),i(""),x(!0);try{let t=await d.Z.post("".concat("http://localhost:8000","/chat"),{message:e.content},{headers:{"X-API-Key":s}}),a={role:"assistant",content:t.data.response,timestamp:new Date};n(e=>[...e,a])}catch(e){var t,a;l.Am.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||"Failed to send message"),console.error("Chat error:",e)}finally{x(!1)}},j=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg h-[600px] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Contract Analysis Chat"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Ask questions about your processed contracts"})]}),(0,a.jsxs)("div",{ref:u,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===t.length?(0,a.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-full p-4 w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"h-10 w-10 text-blue-600"})}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-700 mb-2",children:"\uD83C\uDF89 Your contracts are ready!"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"I've analyzed your contracts and I'm ready to answer questions."}),(0,a.jsx)("div",{className:"mt-6 space-y-2 text-left max-w-lg mx-auto",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-100",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDCA1"}),"Try asking me:"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,a.jsx)("button",{onClick:()=>i("What are the key terms of the securities purchase agreements?"),className:"bg-white p-2 rounded-lg text-xs text-gray-600 hover:bg-blue-50 transition-colors cursor-pointer border text-left",children:'"What are the key terms of the securities purchase agreements?"'}),(0,a.jsx)("button",{onClick:()=>i("Who are the main parties involved across all contracts?"),className:"bg-white p-2 rounded-lg text-xs text-gray-600 hover:bg-blue-50 transition-colors cursor-pointer border text-left",children:'"Who are the main parties involved across all contracts?"'}),(0,a.jsx)("button",{onClick:()=>i("What types of securities were issued and when?"),className:"bg-white p-2 rounded-lg text-xs text-gray-600 hover:bg-blue-50 transition-colors cursor-pointer border text-left",children:'"What types of securities were issued and when?"'}),(0,a.jsx)("button",{onClick:()=>i("Summarize the closing conditions across contracts"),className:"bg-white p-2 rounded-lg text-xs text-gray-600 hover:bg-blue-50 transition-colors cursor-pointer border text-left",children:'"Summarize the closing conditions across contracts"'})]})]})})]}):t.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-white"})})}),(0,a.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-lg ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,a.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.role?"text-blue-100":"text-gray-500"),children:j(e.timestamp)})]}),"user"===e.role&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-600"})})})]},s)),o&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-white"})})}),(0,a.jsx)("div",{className:"bg-gray-100 px-4 py-3 rounded-lg",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),(0,a.jsx)("div",{ref:m})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("textarea",{value:c,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:"Ask a question about your contracts...",className:"flex-1 resize-none border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,disabled:o}),(0,a.jsx)("button",{onClick:h,disabled:!c.trim()||o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})]})})]})}var y=t(6610),f=t(4209),N=t(2929),v=t(0),w=t(1615),k=t(3352);function S(){let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0),[c,i]=(0,r.useState)(!1),[o,x]=(0,r.useState)("current");(0,r.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await d.Z.get("".concat("http://localhost:8000","/contracts/summary"));s(e.data)}catch(e){l.Am.error("Failed to fetch contract summary"),console.error("Fetch error:",e)}finally{n(!1)}},u=async()=>{i(!0);try{let e=await d.Z.get("".concat("http://localhost:8000","/download/processed-data"),{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=s,t.setAttribute("download","processed_contracts_".concat(new Date().toISOString().split("T")[0],".json")),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(s),l.Am.success("Download started!")}catch(e){l.Am.error("Failed to download data"),console.error("Download error:",e)}finally{i(!1)}},h=async()=>{i(!0);try{let e=await d.Z.get("".concat("http://localhost:8000","/download/backup"),{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=s,t.setAttribute("download","neo4j_backup_".concat(new Date().toISOString().split("T")[0],".json")),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(s),l.Am.success("Backup download started!")}catch(e){l.Am.error("Failed to download backup"),console.error("Backup download error:",e)}finally{i(!1)}};if(t)return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})});if(!e)return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(y.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Failed to load contract data"})]})});let g=e.current_session.contracts,p=e.all_contracts.contracts,b="current"===o?g:p;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(y.Z,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Contract Analysis Results"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:u,disabled:c,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 transition-colors text-sm",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Download Data"})]}),(0,a.jsxs)("button",{onClick:h,disabled:c,className:"flex items-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 transition-colors text-sm",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Download Backup"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-6 p-1 bg-gray-100 rounded-lg",children:[(0,a.jsxs)("button",{onClick:()=>x("current"),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("current"===o?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["This Session (",e.current_session.total,")"]})]}),(0,a.jsxs)("button",{onClick:()=>x("all"),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("all"===o?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["All Contracts (",e.all_contracts.total,")"]})]})]}),0===b.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(y.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"current"===o?"No contracts processed in this session yet":"No contracts found in database"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["current"===o?"Session":"Total"," Contracts"]})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:b.length})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-900",children:"Total Parties"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:b.reduce((e,s)=>e+s.parties_count,0)})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(k.Z,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-purple-900",children:"Total Securities"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:b.reduce((e,s)=>e+s.securities_count,0)})]})]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:b.map((e,s)=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:e.contract_type}),e.execution_date&&(0,a.jsx)("span",{children:new Date(e.execution_date).toLocaleDateString()})]}),e.summary&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:e.summary}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-2",children:[(0,a.jsxs)("span",{children:[e.parties_count," parties"]}),(0,a.jsxs)("span",{children:[e.securities_count," securities"]})]})]})})},s))})]})]})}var A=t(9770);function C(e){let{logs:s,onClear:t,isConnected:l}=e,n=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]);let c=e=>new Date(e).toLocaleTimeString(),o=e=>{switch(e){case"error":return"text-red-600 bg-red-50";case"warning":return"text-yellow-600 bg-yellow-50";default:return"text-blue-600 bg-blue-50"}},d=e=>{switch(e){case"error":return"bg-red-500";case"warning":return"bg-yellow-500";default:return"bg-blue-500"}};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg h-[600px] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Live Logs"}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(l?"bg-green-500":"bg-red-500")})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Clear logs",children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-gray-50",children:[0===s.length?(0,a.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,a.jsx)(A.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No logs yet. Waiting for activity..."})]}):s.map((e,s)=>(0,a.jsx)("div",{className:"p-3 rounded-lg border-l-4 ".concat(o(e.level)),children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(d(e.level))}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:c(e.timestamp)}),e.level&&(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600 uppercase",children:e.level})]}),(0,a.jsx)("p",{className:"text-sm text-gray-800 break-words",children:e.message}),e.data&&(0,a.jsxs)("details",{className:"mt-2",children:[(0,a.jsx)("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"View details"}),(0,a.jsx)("pre",{className:"text-xs text-gray-600 mt-1 p-2 bg-white rounded border overflow-auto",children:JSON.stringify(e.data,null,2)})]})]})})},s)),(0,a.jsx)("div",{ref:n})]}),(0,a.jsx)("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[s.length," log entries"]}),(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"h-1.5 w-1.5 rounded-full ".concat(l?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{children:l?"Connected":"Disconnected"})]})]})})]})}var Z=t(832),_=t(432),I=t(2466);function P(e){let{isConnected:s}=e;return(0,a.jsx)("header",{className:"gradient-bg text-white shadow-lg",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(y.Z,{className:"h-8 w-8"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"GraphRAG Contract Processor"}),(0,a.jsx)("p",{className:"text-blue-100",children:"AI-powered contract analysis and knowledge graph generation"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Z.Z,{className:"h-5 w-5"}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{className:"h-5 w-5 text-green-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Connected"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.Z,{className:"h-5 w-5 text-red-300"}),(0,a.jsx)("span",{className:"text-sm",children:"Disconnected"})]})})]})]})})})}var D=t(1226),F=t(1543),T=t(9367);function E(e){let{onApiKeyChange:s}=e,[t,n]=(0,r.useState)(""),[c,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("gemini_api_key");e&&(n(e),d(!0),null==s||s(e))},[s]);let g=e=>{n(e),d(null),e?localStorage.setItem("gemini_api_key",e):localStorage.removeItem("gemini_api_key"),null==s||s(e)},p=async()=>{if(!t.trim()){l.Am.error("Please enter an API key");return}h(!0);try{let e=await fetch("".concat("http://localhost:8000","/validate-api-key"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:t})});e.ok?(d(!0),l.Am.success("API key is valid!")):(d(!1),l.Am.error("Invalid API key"))}catch(e){d(!1),l.Am.error("Failed to validate API key"),console.error("API key validation error:",e)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(D.Z,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"API Configuration"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"api-key",className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Gemini API Key"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:!0===o?(0,a.jsx)(m.Z,{className:"h-5 w-5 text-green-500"}):!1===o?(0,a.jsx)(u.Z,{className:"h-5 w-5 text-red-500"}):(0,a.jsx)(D.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{id:"api-key",type:c?"text":"password",value:t,onChange:e=>g(e.target.value),placeholder:"Enter your Gemini API key...",className:"block w-full pl-10 pr-20 py-3 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 ".concat(!0===o?"border-green-300 focus:ring-green-500 focus:border-green-500":!1===o?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500")}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center space-x-1 pr-3",children:(0,a.jsx)("button",{type:"button",onClick:()=>i(!c),className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:c?(0,a.jsx)(F.Z,{className:"h-5 w-5"}):(0,a.jsx)(T.Z,{className:"h-5 w-5"})})})]}),!0===o&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-green-600 flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"API key is valid and ready to use"]}),!1===o&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Invalid API key. Please check and try again."]}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Get your free API key from"," ",(0,a.jsx)("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline",children:"Google AI Studio"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:p,disabled:!t.trim()||x,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Validating..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Validate Key"})]})}),(0,a.jsx)("button",{onClick:()=>{n(""),d(null),localStorage.removeItem("gemini_api_key"),null==s||s(""),l.Am.success("API key cleared")},disabled:!t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Clear"})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(D.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-blue-900 mb-1",children:"Security Note"}),(0,a.jsx)("p",{className:"text-blue-800",children:"Your API key is stored locally in your browser and is only sent to the processing server. It is never stored on our servers or shared with third parties."})]})]})})]})}function L(){let[e,s]=(0,r.useState)({status:"idle",progress:0,total_files:0,processed_files:0,message:"Ready to process contracts"}),[t,n]=(0,r.useState)([]),[c,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=()=>{let t=new WebSocket("ws://localhost:8000/ws");t.onopen=()=>{console.log("WebSocket connected"),d(!0),i(t)},t.onmessage=e=>{let t=JSON.parse(e.data);"log"===t.type?n(e=>[...e,t]):"status"===t.type&&s(t.data)},t.onclose=()=>{console.log("WebSocket disconnected"),d(!1),i(null),setTimeout(e,3e3)},t.onerror=e=>{console.error("WebSocket error:",e),d(!1)}};return e(),()=>{c&&c.close()}},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("gemini_api_key");e&&u(e)},[]);let g="idle"===e.status,p="processing"===e.status,b="completed"===e.status,y="idle"===e.status&&!m;return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[(0,a.jsx)(P,{isConnected:o}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[y&&(0,a.jsx)("div",{className:"animate-fade-in",children:(0,a.jsx)(E,{onApiKeyChange:u})}),g&&m&&(0,a.jsx)("div",{className:"animate-fade-in",children:(0,a.jsx)(x,{onUploadComplete:()=>{},onProcessingStart:()=>{s(e=>({...e,status:"processing",progress:0,message:"Starting contract processing..."}))},apiKey:m})}),p&&(0,a.jsx)("div",{className:"animate-fade-in",children:(0,a.jsx)(h,{status:e})}),b&&(0,a.jsxs)("div",{className:"animate-fade-in space-y-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -top-3 left-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 rounded-full text-xs font-medium",children:"\uD83E\uDD16 AI Assistant Ready"}),(0,a.jsx)(j,{apiKey:m})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"h-px bg-gradient-to-r from-gray-300 via-gray-200 to-transparent flex-1"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500 bg-gray-50 px-4 py-2 rounded-full",children:"\uD83D\uDCCA Contract Overview"}),(0,a.jsx)("div",{className:"h-px bg-gradient-to-l from-gray-300 via-gray-200 to-transparent flex-1"})]}),(0,a.jsx)(S,{})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(C,{logs:t,onClear:()=>{n([])},isConnected:o})})]})}),(0,a.jsx)(l.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})}}},function(e){e.O(0,[651,971,472,744],function(){return e(e.s=4538)}),_N_E=e.O()}]);